(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{70:function(e,t,n){e.exports=n(84)},79:function(e,t,n){},81:function(e,t,n){},84:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(58),c=n.n(o),l=n(18),i=n(66),u=n(24),s=n(61),p=n(7),y=p.a.fromJS({status:null,route:"/",auth:!1}),_=p.a.fromJS({email:null,token:null}),d=p.a.fromJS({serverUrl:"http://localhost:5000"}),E=p.a.fromJS({startTime:null,timeline:[],timelineCursor:0,playerTime:0,recording:!1,playing:!1,delay:50}),f=p.a.fromJS({left:0,top:0,event:null}),O=p.a.fromJS({preloadedSongs:{},playing:""}),S=p.a.fromJS([{id:"dontlaugh",icon:"",color:"#56CCF2",info:{title:"Don't Laugh",description:"bla bla bla.."},songs:[{name:"happy",url:"/snd/songs/happy.mp3"},{name:"figaro",url:"/snd/songs/figaro.mp3"},{name:"surfin",url:"/snd/songs/surfinbird.mp3"},{name:"blink",url:"/snd/songs/blink182.mp3"}]},{id:"blowmeup",icon:"",color:"#BB6BD9",info:{title:"Blow me up",description:"bla bla bla.."},songs:[{name:"blink182",url:"/snd/songs/blink182.mp3"}]},{id:"speedygonzales",icon:"",color:"#F2C94C",info:{title:"Speedy Gonzales",description:"bla bla bla.."},songs:[{name:"surfinbird",url:"/snd/songs/surfinbird.mp3"}]},{id:"figaro",icon:"",color:"#EB5757",info:{title:"Figaro",description:"bla bla bla.."},songs:[{name:"figaro",url:"/snd/songs/figaro.mp3"}]}]),b=Object(u.c)({app:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"APP_CHANGE_ROUTE":return function(e,t){return e.set("route",t)}(e,t.payload);case"APP_READY":return function(e){return e.set("status","ready")}(e);case"APP_SET_AUTH":return function(e,t){return e.set("auth",t)}(e,t.payload);default:return e}},user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"USER_SET_TOKEN":return function(e,t){return e.set("token",t.res.token)}(e,t.payload);case"USER_SET_EMAIL":return function(e,t){return e.set("email",t)}(e,t.payload);case"USER_LOGGED_OUT":return function(e){return e.set("email",null).set("token",null)}(e);default:return e}},api:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"API_SET_SERVER_URL":return function(e,t){return e.set("serverUrl",t)}(e,t.payload);default:return e}},spy:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SPY_ADD_USER_EVENT":return function(e,t){var n=t.event,a=t.x,r=t.y,o=t.w,c=t.h,l=t.actionType,i=t.actionPayload,u=t.callback,s=e.get("timeline").toJS();return s.push({time:(new Date).getTime()-e.get("startTime"),event:n,x:a,y:r,w:o,h:c,actionType:l,actionPayload:i,callback:u}),e.set("timeline",p.a.fromJS(s))}(e,t.payload);case"SPY_START_RECORDING":return function(e){return e.set("recording",!0).set("startTime",(new Date).getTime())}(e);case"SPY_STOP_RECORDING":return function(e){return e.set("recording",!1)}(e);case"SPY_START_PLAYING":return function(e){return e.set("playing",!0)}(e);case"SPY_STOP_PLAYING":return function(e){return e.set("playing",!1)}(e);case"SPY_INCREASE_TIMELINE_CURSOR":return function(e){return e.set("timelineCursor",e.get("timelineCursor")+1)}(e);case"SPY_INCREASE_PLAYER_TIME":return function(e,t){return e.set("playerTime",e.get("playerTime")+t)}(e,t.payload);case"SPY_RESET_PLAYER":return function(e){return e.set("timelineCursor",0).set("playerTime",0)}(e);default:return e}},mouse:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"MOUSE_SET_POSITION":return function(e,t){var n=t.left,a=t.top;return e.set("left",n).set("top",a)}(e,t.payload);case"MOUSE_SET_CLICK":return function(e){return e.set("event","click")}(e);case"MOUSE_RESET":return function(e){return e.set("event",null)}(e);default:return e}},play:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"PLAY_SONG_PRELOAD_COMPLETE":return function(e,t){var n=e.get("preloadedSongs").set(t,!0);return e.set("preloadedSongs",n)}(e,t.payload);case"PLAY_SONG_SET_CURRENT":return function(e,t){return e.set("playing",t)}(e,t.payload);default:return e}},games:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S;return(arguments.length>1?arguments[1]:void 0).type,e}}),m=n(68),g=n(28),P=n(85),T=n(62),h=n(35),j=n(95),A=n(53),v=n(67),C=function(e){var t=e.url,n=e.method,a=e.headers,r=e.body;return new Promise(function(e,o){var c=new XMLHttpRequest;c.open(n,t,!0),a&&Object.keys(a).forEach(function(e){c.setRequestHeader(e,a[e])}),c.onload=function(){this.status>=200&&this.status<300?e(c.response):o({status:this.status,statusText:c.statusText})},c.onerror=function(){o({status:this.status,statusText:c.statusText})},c.send(JSON.stringify(r))})},R={APP_INIT:function(e){return e.pipe(Object(v.a)("APP_INIT"),Object(g.a)(function(e){return{type:"GAMES_PRELOAD_RESOURCES",payload:e.payload}}))},APP_LINK:function(e,t){return e.pipe(Object(v.a)("APP_LINK"),Object(P.a)(function(e){"function"===typeof e.payload.callback&&e.payload.callback()}),Object(T.a)(function(e){return t.value.spy.get("recording")?Object(j.a)(Object(A.a)({type:"SPY_ADD_USER_EVENT",payload:{event:"action",actionType:"APP_CHANGE_ROUTE",actionPayload:e.payload.url,callback:e.payload.callback}}),Object(A.a)({type:"APP_CHANGE_ROUTE",payload:e.payload.url})):Object(A.a)({type:"APP_CHANGE_ROUTE",payload:e.payload.url})}))}},N={USER_LOGGED_IN:function(e){return e.pipe(Object(v.a)("USER_LOGGED_IN"),Object(T.a)(function(e){return Object(j.a)(Object(A.a)({type:"USER_SET_EMAIL",payload:e.payload.payload}),Object(A.a)({type:"USER_SET_TOKEN",payload:e.payload}))}))}},I=n(86),L=n(87),Y={API_GET:function(e){return e.pipe(Object(v.a)("API_GET"),Object(I.a)(function(t){return function(e){var t=e.url,n=e.actions;return Object(h.a)(C({url:t,method:"GET"}).then(function(e){return"success"===(e=JSON.parse(e)).status?{type:n.success,payload:{payload:n.success.payload,res:e}}:{type:n.error,payload:{url:t,content:e}}}).catch(function(e){return{type:"GET_ERROR",payload:e}}))}({url:t.payload.url,actions:t.payload.actions}).pipe(Object(L.a)(e.ofType("API_STOP_ALL")))}))},API_POST:function(e){return e.pipe(Object(v.a)("API_POST"),Object(I.a)(function(t){return function(e){var t=e.url,n=e.body,a=e.actions;return Object(h.a)(C({url:t,method:"POST",body:n,headers:{"content-type":"application/json"}}).then(function(e){return"success"===(e=JSON.parse(e)).status?{type:a.success.type,payload:{payload:a.success.payload,res:e}}:{type:a.error,payload:{url:t,content:e}}}).catch(function(e){return{type:"POST_ERROR",payload:e}}))}({url:t.payload.url,body:t.payload.body,actions:t.payload.actions}).pipe(Object(L.a)(e.ofType("API_STOP_ALL")))}))}},k=n(96),w=n(97),U=n(88),G=n(89),D={SPY_WATCH_MOUSE_MOVE:function(e,t){return e.pipe(Object(v.a)("SPY_WATCH_MOUSE_MOVE"),Object(I.a)(function(){return Object(U.a)(document,"mousemove").pipe(Object(L.a)(e.ofType("SPY_WATCH_STOP")))}),Object(k.a)(t.value.spy.get("delay")),Object(g.a)(function(e){return{type:"SPY_ADD_USER_EVENT",payload:{event:"move",x:e.pageX,y:e.pageY}}}))},SPY_WATCH_SCREEN_SIZE:function(e,t){return e.pipe(Object(v.a)("SPY_WATCH_SCREEN_SIZE"),Object(I.a)(function(){return Object(U.a)(window,"resize").pipe(Object(L.a)(e.ofType("SPY_WATCH_STOP")))}),Object(k.a)(t.value.spy.get("delay")),Object(g.a)(function(){return{type:"SPY_ADD_USER_EVENT",payload:{event:"resize",w:window.innerWidth,h:window.innerHeight}}}))},SPY_WATCH_MOUSE_CLICK:function(e){return e.pipe(Object(v.a)("SPY_WATCH_MOUSE_CLICK"),Object(I.a)(function(){return Object(U.a)(document,"click").pipe(Object(L.a)(e.ofType("SPY_WATCH_STOP")))}),Object(g.a)(function(e){return{type:"SPY_ADD_USER_EVENT",payload:{event:"click",x:e.pageX,y:e.pageY}}}))},SPY_START_PLAYING:function(e,t){return e.pipe(Object(v.a)("SPY_START_PLAYING"),Object(I.a)(function(){return Object(G.a)(t.value.spy.get("delay")).pipe(Object(L.a)(e.ofType("SPY_STOP_PLAYING")))}),Object(T.a)(function(){var e=t.value.spy.get("playerTime"),n=t.value.spy.get("timelineCursor"),a=t.value.spy.get("timeline").toJS()[n];return a?e>=a.time?Object(j.a)(Object(A.a)({type:"SPY_PREVIEW_EVENT",payload:a}),Object(A.a)({type:"SPY_INCREASE_TIMELINE_CURSOR"})):Object(A.a)({type:"SPY_INCREASE_PLAYER_TIME",payload:t.value.spy.get("delay")}):Object(j.a)(Object(A.a)({type:"SPY_STOP_PLAYING"}),Object(A.a)({type:"SPY_RESET_PLAYER"}))}))},SPY_START_RECORDING:function(e){return e.pipe(Object(v.a)("SPY_START_RECORDING"),Object(T.a)(function(){return Object(j.a)(Object(A.a)({type:"SPY_WATCH_MOUSE_MOVE"}),Object(A.a)({type:"SPY_WATCH_MOUSE_CLICK"}),Object(A.a)({type:"SPY_WATCH_SCREEN_SIZE"}))}))},SPY_STOP_RECORDING:function(e){return e.pipe(Object(v.a)("SPY_STOP_RECORDING"),Object(g.a)(function(){return{type:"SPY_WATCH_STOP"}}))},SPY_PREVIEW_EVENT:function(e,t){return e.pipe(Object(v.a)("SPY_PREVIEW_EVENT"),Object(g.a)(function(e){switch(e.payload.event){case"move":return{type:"MOUSE_SET_POSITION",payload:{left:e.payload.x,top:e.payload.y}};case"click":return{type:"MOUSE_SET_CLICK"};case"action":return"function"===typeof e.payload.callback&&setTimeout(e.payload.callback,t.value.spy.get("delay")+150),{type:e.payload.actionType,payload:e.payload.actionPayload};default:return{type:""}}}))},MOUSE_SET_CLICK:function(e){return e.pipe(Object(v.a)("MOUSE_SET_CLICK"),Object(w.a)(50),Object(g.a)(function(){return{type:"MOUSE_RESET"}}))}},M=n(63);M.Howler.volume(1);var x,H={},W={PLAY_SONG:function(e,t){return e.pipe(Object(v.a)("PLAY_SONG"),Object(g.a)(function(e){var n=t.value.play.get("playing");return n&&H[n].stop(),n!==e.payload?(function(e){H[e].play()}(e.payload),{type:"PLAY_SONG_SET_CURRENT",payload:e.payload}):{type:"PLAY_SONG_SET_CURRENT",payload:""}}))}},J={GAMES_PRELOAD_RESOURCES:function(e,t){return e.pipe(Object(v.a)("GAMES_PRELOAD_RESOURCES"),Object(P.a)(function(e){var n=window.location.pathname;return n="/"===n?"":n,console.log(n),t.value.games.toJS().map(function(t){return t.songs.map(function(t){return console.log(t.url),function(e,t){H[e]||(H[e]=new M.Howl({src:[e]}),H[e].once("load",t))}(n+t.url,function(){e.payload.dispatch({type:"PLAY_SONG_PRELOAD_COMPLETE",payload:n+t.url})}),n+t.url})})}),Object(g.a)(function(e){return{type:"GAMES_PRELOAD_RESOURCES_DONE"}}))}},V=Object(m.a)({},R,N,Y,D,W,J),K=n(94),B=n(91),F=Object.keys(V).map(function(e){return V[e]}),z=K.a.apply(void 0,Object(i.a)(F)),Z=Object(B.a)();x=Object(u.d)(b,Object(u.a)(s.logger,Z)),Z.run(z),x.dispatch({type:"APP_INIT",payload:x});var X=x,q=n(92),$=n(90),Q=(n(79),n(81),n(31)),ee=n(32),te=n(36),ne=n(33),ae=n(37),re=function(e,t){return{type:e,payload:t}},oe=function(e){var t=e.color,n=e.classes,a=e.onClick,o=e.children,c=e.url;return r.a.createElement("div",{url:c,className:"d-flex justify-content-center align-items-center ".concat(n||""),style:{color:"white",backgroundColor:t||"grey",textAlign:"center",cursor:"pointer"},onClick:a},o)},ce=function(e){function t(){var e,n;Object(Q.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(te.a)(this,(e=Object(ne.a)(t)).call.apply(e,[this].concat(r))))._onClickLink=function(e){var t=e.target.getAttribute("url");n.props.fire("APP_LINK",{url:t,callback:function(){n.props.history.push(t)}})},n}return Object(ae.a)(t,e),Object(ee.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"page page--root h-100 d-flex flex-column justify-content-center align-items-center flex-wrap"},r.a.createElement(oe,{onClick:this._onClickLink,url:"/games/dontlaugh",color:"#56CCF2",classes:"w-50 h-50"},"DON'T",r.a.createElement("br",null),"LAUGH"),r.a.createElement(oe,{onClick:this._onClickLink,url:"/games/speedygonzales",color:"#F2C94C",classes:"w-50 h-50"},"SPEEDY",r.a.createElement("br",null),"GONZALES"),r.a.createElement(oe,{onClick:this._onClickLink,url:"/games/blowmeup",color:"#BB6BD9",classes:"w-50 h-50"},"BLOW",r.a.createElement("br",null),"ME UP"),r.a.createElement(oe,{onClick:this._onClickLink,url:"/games/figaro",color:"#EB5757",classes:"w-50 h-50"},"FIGARO"))}}]),t}(a.Component),le=Object(l.b)(function(e){return{app:e.app}},function(e){return{fire:function(t,n){e(re(t,n))}}})(ce),ie=function(e){function t(){var e,n;Object(Q.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(te.a)(this,(e=Object(ne.a)(t)).call.apply(e,[this].concat(r))))._playSong=function(e){n.props.fire("PLAY_SONG",e)},n}return Object(ae.a)(t,e),Object(ee.a)(t,[{key:"render",value:function(){var e,t=this,n=this.props.preloadedSongs,a=this.props.match.params.game,o=[];this.props.games.forEach(function(t){t.id===a&&(e=t.color,o=t.songs)});var c=o.length;return r.a.createElement("div",{className:"page page--root h-100 d-flex flex-column justify-content-center align-items-center flex-wrap"},r.a.createElement("div",{className:"h-100 w-50"}),r.a.createElement("div",{className:"h-100 w-50 d-flex flex-column justify-content-center align-items-center"},o.map(function(a){return n[a.url]?r.a.createElement(oe,{key:a.name,onClick:function(){t._playSong(a.url)},color:e,classes:"w-100 h-".concat(100/c)},a.name):r.a.createElement(oe,{key:a.name,color:"grey",classes:"w-100 h-".concat(100/c)},"loading...")})))}}]),t}(a.Component),ue=Object(l.b)(function(e){return{app:e.app,games:e.games.toJS(),preloadedSongs:e.play.get("preloadedSongs").toJS()}},function(e){return{fire:function(t,n){e(re(t,n))}}})(ie),se=n(93),pe=function(e){var t=e.url,n=e.onClick,a=e.children;return r.a.createElement("div",{url:t,className:"navigation__link btn btn-link p-2 d-flex justify-content-center align-items-center",onClick:n},a)},ye=function(e){function t(){var e,n;Object(Q.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(te.a)(this,(e=Object(ne.a)(t)).call.apply(e,[this].concat(r))))._onClickLink=function(e){var t=e.target.getAttribute("url");n.props.fire("APP_LINK",{url:t,callback:function(){n.props.history.push(t)}})},n}return Object(ae.a)(t,e),Object(ee.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"navigation d-flex align-items-center justify-content-center"},r.a.createElement(pe,{onClick:this._onClickLink,url:"/"},"home"))}}]),t}(a.Component),_e=Object(l.b)(function(e){return{app:e.app}},function(e){return{fire:function(t,n){e(re(t,n))}}})(Object(se.a)(ye));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(l.a,{store:X},r.a.createElement(q.a,null,r.a.createElement(a.Fragment,null,r.a.createElement(_e,null),r.a.createElement($.a,{exact:!0,path:"/",component:le}),r.a.createElement($.a,{exact:!0,path:"/games/:game",component:ue})))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[70,2,1]]]);
//# sourceMappingURL=main.3d3ec122.chunk.js.map